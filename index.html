<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Kalijaga | Pemesanan</title>
    <meta charset="utf-8" />
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1"> -->
    <link rel="stylesheet" href="./assets/css/style.css" />
    <link rel="icon" type="image/x-icon" href="./assets/img/kalijaga.jpg">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      body {
        background-image: url("./assets/img/kalijagabar.jpg"); /* Tambahkan URL gambar */
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        background-color: rgba(255, 255, 255, 0.5);
        background-blend-mode: overlay;
        width: 100%;
        height: 100vh;
        position: relative;
      }
      .fakeimg {
        height: 200px;
        background: #aaa;
      }
    </style>
  </head>
  <body>
    <!-- section menu -->
    <!-- <section id="menu"> -->
    <!-- head -->
    <div class="container mt-5 bg-hijau text-plain border-radius drop-shadow">
      <div class="row">
        <div class="col-xl-12 mt-3">
          <h1 class="text-center text-cerah">- Sugeng Rawuh -</h1>
          <h5 class="text-center text-cerah mt-1">Meja No.1</h5> 
          <p></p>
        </div>
      </div>
    </div>
    <!-- head end -->

    <!-- btn makan-minum start -->
    <div class="container mt-5 text-plain">
      <div class="row">
        <div class="col-sm-9">
          <p>
            <button
              class="btn-makanan-minuman"
              type="button"
              onclick="showOnly('multiCollapseExample1')"
            >
              Makanan
            </button>
            <button
              class="btn-makanan-minuman"
              type="button"
              onclick="showOnly('multiCollapseExample2')"
            >
              Minuman
            </button>
          </p>

          <div class="row">
            <div class="col">
              <div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                  <div class="modal-content">
                    <div class="modal-body text-center">
                      <img id="modalImage" src="" class="img-fluid rounded" alt="Preview">
                    </div>
                  </div>
                </div>
              </div>
              <div class="collapse" id="multiCollapseExample1">
                <div class="container mt-3 text-plain">
                  <div class="row">
                    <!-- Kolom Makanan -->
                    <div class="col-sm-7 border-radius">
                      <h2 class="text-center mt-3 bg-cerah border-radius">Makanan</h2>

                      <!-- Card Menu -->
                      <div class="row">
                        <div class="col-6 mb-3 text-cerah">
                          <div
                            class="card p-2 bg-hijau text-cerah"
                            style="background-color: #3f4f44; color: #d9d9d9"
                          >
                            <div class="row g-0 align-items-center">
                              <div class="col-md-4">
                                <img
                                  src="./assets/img/nasgor.jpg"
                                  class="img-fluid rounded"
                                  alt="Product Image"
                                  data-bs-toggle="modal"
                                  data-bs-target="#imageModal"
                                  onclick="showImage(this)"
                                />
                              </div>
                              <div class="col-md-8 text-cerah">
                                <div class="card-body">
                                  <h5
                                    class="card-title mb-1"
                                    style="color: #d9d9d9"
                                  >
                                    Nasgor SF
                                  </h5>
                                  <p
                                    class="card-text mb-2"
                                    style="color: #d9d9d9"
                                  >
                                    Rp 29.000
                                  </p>
                                  <div class="d-flex align-items-center">
                                    <button
                                      class="btn btn-outline-secondary btn-sm"
                                      onclick="ubahPesanan('NasgorSF', 29000, -1)"
                                      style="color: #d9d9d9"    
                                    >
                                      −
                                    </button>
                                    <input
                                    type="text"
                                    class="form-control text-center mx-2"
                                    id="quantity-NasgorSF"
                                    value="0"
                                    style="width: 50px"
                                    readonly
                                    />
                                    <button
                                      class="btn btn-outline-primary btn-sm"
                                      onclick="ubahPesanan('NasgorSF', 29000, 1)"
                                      style="color: #d9d9d9"
                                    >
                                      +
                                    </button>
                                  </div>
                                  
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="col-6 mb-3 text-cerah">
                          <div
                            class="card p-2 bg-hijau text-cerah"
                            style="background-color: #3f4f44; color: #d9d9d9"
                          >
                            <div class="row g-0 align-items-center">
                              <div class="col-md-4">
                                <img
                                src="./assets/img/nasgor.jpg"
                                class="img-fluid rounded"
                                alt="Product Image"
                                data-bs-toggle="modal"
                                data-bs-target="#imageModal"
                                onclick="showImage(this)"
                                />
                              </div>
                              <div class="col-md-8 text-cerah">
                                <div class="card-body">
                                  <h5
                                    class="card-title mb-1"
                                    style="color: #d9d9d9"
                                  >
                                    Nasgor 2
                                  </h5>
                                  <p
                                    class="card-text mb-2"
                                    style="color: #d9d9d9"
                                  >
                                    Rp 18.000
                                  </p>
                                  <div class="d-flex align-items-center">
                                    <button
                                      class="btn btn-outline-secondary btn-sm"
                                      onclick="ubahPesanan('Nasgor2', 18000, -1)"
                                      style="color: #d9d9d9"    
                                    >
                                      −
                                    </button>
                                    <input
                                    type="text"
                                    class="form-control text-center mx-2"
                                    id="quantity-Nasgor2"
                                    value="0"
                                    style="width: 50px"
                                    readonly
                                    />
                                    <button
                                      class="btn btn-outline-primary btn-sm"
                                      onclick="ubahPesanan('Nasgor2', 18000, 1)"
                                      style="color: #d9d9d9"
                                    >
                                      +
                                    </button>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>      
                      <br>
                      <br>                
                    </div>
                  </div>
                </div>
              </div>
              <div class="collapse" id="multiCollapseExample2">
                <div class="container mt-3 text-plain">
                  <div class="row">
                    <!-- Kolom Makanan -->
                    <div class="col-sm-7  border-radius">
                      <h2 class="text-center mt-3 bg-cerah border-radius" >Minuman</h2>

                      <!-- Card Menu -->
                      <div class="row">
                        <div class="col-6 mb-3 text-cerah">
                          <div
                            class="card p-2 bg-hijau text-cerah"
                            style="background-color: #3f4f44; color: #d9d9d9"
                          >
                            <div class="row g-0 align-items-center">
                              <div class="col-md-4">
                                <img
                                  src="./assets/img/coffee-3.jpg"
                                  class="img-fluid rounded"
                                  alt="Product Image"
                                  data-bs-toggle="modal"
                                  data-bs-target="#imageModal"
                                  onclick="showImage(this)"
                                />
                              </div>
                              <div class="col-md-8 text-cerah">
                                <div class="card-body">
                                  <h5
                                    class="card-title mb-1"
                                    style="color: #d9d9d9"
                                  >
                                    Kopi Tubruk
                                  </h5>
                                  <p
                                    class="card-text mb-2"
                                    style="color: #d9d9d9"
                                  >
                                    Rp 13.000
                                  </p>
                                  <div class="d-flex align-items-center">
                                    <button
                                      class="btn btn-outline-secondary btn-sm"
                                      onclick="ubahPesanan('KopiTubruk', 13000, -1)"
                                      style="color: #d9d9d9"
                                    >
                                      −
                                    </button>
                                    <input
                                    type="text"
                                    class="form-control text-center mx-2"
                                    id="quantity-KopiTubruk"
                                    value="0"
                                    style="width: 50px"
                                    readonly
                                    />
                                    <button
                                      class="btn btn-outline-primary btn-sm"
                                      onclick="ubahPesanan('KopiTubruk', 13000, 1)"
                                      style="color: #d9d9d9"
                                    >
                                      +
                                    </button>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="col-6 mb-3 text-cerah">
                          <div
                            class="card p-2 bg-hijau text-cerah"
                            style="background-color: #3f4f44; color: #d9d9d9"
                          >
                            <div class="row g-0 align-items-center">
                              <div class="col-md-4">
                                <img
                                  src="./assets/img/coffee-3.jpg"
                                  class="img-fluid rounded"
                                  alt="Product Image"
                                  data-bs-toggle="modal"
                                  data-bs-target="#imageModal"
                                  onclick="showImage(this)"
                                />
                              </div>
                              <div class="col-md-8 text-cerah">
                                <div class="card-body">
                                  <h5
                                    class="card-title mb-1"
                                    style="color: #d9d9d9"
                                  >
                                    Kopi Cream
                                  </h5>
                                  <p
                                    class="card-text mb-2"
                                    style="color: #d9d9d9"
                                  >
                                    Rp 15.000
                                  </p>
                                  <div class="d-flex align-items-center">
                                    <button
                                      class="btn btn-outline-secondary btn-sm"
                                      onclick="ubahPesanan('KopiCream', 15000, -1)"
                                      style="color: #d9d9d9"
                                    >
                                      −
                                    </button>
                                    <input
                                    type="text"
                                    class="form-control text-center mx-2"
                                    id="quantity-KopiCream"
                                    value="0"
                                    style="width: 50px"
                                    readonly
                                    />
                                    <button
                                      class="btn btn-outline-primary btn-sm"
                                      onclick="ubahPesanan('KopiCream', 15000, 1)"
                                      style="color: #d9d9d9"
                                    >
                                      +
                                    </button>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <br>
                      <br>
                      <br>        
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-3" id="multiCollapseExample2">
            <div class="container mt-3" >
                <h2 class="text-center text-light py-2 rounded bg-hijau">Rincian Pesanan</h2>
                <div class="card border-secondary mb-3 bg-coklat">
                <div class="card-header " style="background-color: #54473F; color: #E3DFC8;">Pesanan Kamu</div>
                <div class="card-body text-secondary">
                    <div id="rincianPesanan" class="mt-4 p-3 bg-light rounded"></div>
                    <!-- Item Pesanan Akan Muncul Disini -->
                </div>
                <div class="form-floating">
                    <textarea class="form-control" placeholder="Leave a comment here" id="floatingTextarea2" style="height: 100px"></textarea>
                    <label for="floatingTextarea2 text-coklat">Catatan :</label>
                  </div>
                <button type="submit" class="btn-makanan-minuman " id="tombolPesan">Pesan</button>
                </div>
            </div>
        </div>
      </div>
    </div>
    <!-- btn makan-minum end -->
    <div class="mt-5 p-4 bg-hijau text-white text-center">
      <p class=" footer-p">Kalijaga &copy; <a href="https://www.instagram.com/spmungkas_/#" class="text-plain footer-text">Team</a></p> 
      </div>
  </body>
  <!-- script bootstrap menu -->
  <script>
    // Fungsi untuk menampilkan hanya satu elemen
    function showOnly(id) {
      // Tutup semua elemen collapse
      document.querySelectorAll(".collapse").forEach(function (collapse) {
        const bsCollapse = new bootstrap.Collapse(collapse, {
          toggle: false,
        });
        bsCollapse.hide();
      });
      function showOnly(id) {
      // Sembunyikan semua collapse
      document.getElementById('multiCollapseExample1').classList.remove('show');
      document.getElementById('multiCollapseExample2').classList.remove('show');
      
      // Tampilkan collapse yang diminta
      document.getElementById(id).classList.add('show');
    }
      // Buka elemen yang dipilih
      const target = document.getElementById(id);
      const bsTarget = new bootstrap.Collapse(target, {
        toggle: false,
      });
      bsTarget.show();
    }
  </script>

  <script>
// Fungsi untuk menambah pesanan
        function tambahPesanan(menu, harga) {
        const inputQty = document.getElementById(`quantity-${menu}`);
        let qty = parseInt(inputQty.value) || 0;
        qty += 1;
        inputQty.value = qty;
        hitungTotal(harga);
        }

        // Fungsi untuk mengurangi pesanan
        function kurangiPesanan(menu) {
        const inputQty = document.getElementById(`quantity-${menu}`);
        let qty = parseInt(inputQty.value) || 0;
        if (qty > 0) {
            qty -= 1;
            inputQty.value = qty;
        }
        }

  </script>
  <!-- script hitung pesanan -->
<script>
    // Struktur Data Pesanan
    let pesanan = [];
    
    // Fungsi untuk Mengubah Pesanan (Tambah/Kurangi)
    function ubahPesanan(menu, harga, perubahan) {
      const inputQty = document.getElementById(`quantity-${menu}`);
      let qty = parseInt(inputQty.value) || 0;
      qty = Math.max(0, qty + perubahan);
      inputQty.value = qty;
    
      const index = pesanan.findIndex(item => item.nama === menu);
      if (index !== -1) {
        pesanan[index].jumlah = qty;
        if (qty === 0) pesanan.splice(index, 1);
      } else if (qty > 0) {
        pesanan.push({ nama: menu, harga: harga, jumlah: qty });
      }
    
      tampilkanRincian();
      hitungTotalHarga();
    }
    
    // Fungsi Hitung Total Harga Keseluruhan
    function hitungTotalHarga() {
      let totalHarga = pesanan.reduce((total, item) => total + item.harga * item.jumlah, 0);
      const totalHargaElement = document.getElementById('totalHarga');
      if (totalHargaElement) {
        totalHargaElement.textContent = `Rp ${totalHarga.toLocaleString()}`;
      }
    }
    
    // Fungsi Tampilkan Rincian Pesanan
    function tampilkanRincian() {
      const rincianContainer = document.getElementById('rincianPesanan');
      rincianContainer.innerHTML = pesanan.length > 0
        ? pesanan.map(item => `
            <div class="d-flex justify-content-between">
              <p>${item.nama} x${item.jumlah}</p>
              <p>Rp ${(item.harga * item.jumlah).toLocaleString()}</p>
            </div>`).join('')
        : '<p>Belum ada pesanan</p>';
      hitungTotalHarga();
    }
    </script>
<!-- script hitung pesanan -->


<!-- script hitung pesanan kopi -->
<script>
    let pesananMinuman = {};
  
    function ubahPesanan(nama, harga, perubahan) {
      // Jika item belum ada di pesanan, inisialisasi
      if (!pesanan[nama]) {
        pesanan[nama] = { jumlah: 0, harga: harga };
      }
  
      // Ubah jumlah pesanan
      pesanan[nama].jumlah += perubahan;
  
      // Pastikan jumlah tidak negatif
      if (pesanan[nama].jumlah < 0) {
        pesanan[nama].jumlah = 0;
      }
  
      // Update input jumlah sesuai nama
      document.getElementById(`quantity-${nama.replace(/\s+/g, '')}`).value = pesanan[nama].jumlah;
  
      // Perbarui rincian pesanan
      tampilkanRincianPesanan();
    }
  
    function tampilkanRincianPesanan() {
      let rincian = '';
      let totalHarga = 0;
  
      for (const item in pesanan) {
        if (pesanan[item].jumlah > 0) {
          const subtotal = pesanan[item].jumlah * pesanan[item].harga;
          rincian += `
            <p>
              ${item} x${pesanan[item].jumlah} = Rp ${subtotal.toLocaleString('id-ID')}
            </p>`;
          totalHarga += subtotal;
        }
      }
  
      if (rincian === '') {
        rincian = '<p>Belum ada pesanan</p>';
      }
  
      rincian += `<hr><strong>Total: Rp ${totalHarga.toLocaleString('id-ID')}</strong>`;
  
      document.getElementById('rincianPesanan').innerHTML = rincian;
    }
  

  </script>
<!-- script hitung pesanan kopi -->

<!-- Tambahkan CDN SweetAlert2 di dalam <head> atau sebelum </body> -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <script>
  // Tambahkan event listener pada tombol "Pesan"
  document.getElementById('tombolPesan').addEventListener('click', function(event) {
    event.preventDefault(); // Mencegah submit otomatis jika di dalam form
  
    if (Object.keys(pesanan).length === 0) {
      Swal.fire({
        icon: 'warning',
        title: 'Oops...',
        text: 'Anda belum memesan apa pun!',
      });
      return;
    }
  
    // Buat rincian pesanan untuk ditampilkan di alert
    let rincian = Object.keys(pesanan)
      .filter(item => pesanan[item].jumlah > 0)
      .map(item => `${item} x${pesanan[item].jumlah} = Rp ${(pesanan[item].jumlah * pesanan[item].harga).toLocaleString('id-ID')}`)
      .join('<br>');
  
    let totalHarga = Object.keys(pesanan).reduce((total, item) => {
      return total + pesanan[item].jumlah * pesanan[item].harga;
    }, 0);
    if(totalHarga <= 0){
      Swal.fire({
        icon: 'warning',
        title: 'Oops...',
        text: 'Anda belum memesan apa pun!',
      });
      return; 
    }
    // Tampilkan konfirmasi dengan SweetAlert2
    Swal.fire({
      title: 'Konfirmasi Pesanan',
      html: `
        <strong>Rincian Pesanan:</strong><br>
        ${rincian}<br><br>
        <strong>Total Harga:</strong> Rp ${totalHarga.toLocaleString('id-ID')}<br><br>
        Apakah Anda ingin memproses pesanan ini?
      `,
      icon: 'info',
      showCancelButton: true,
      confirmButtonText: 'Ya, Pesan!',
      cancelButtonText: 'Batal',
    }).then((result) => {
      if (result.isConfirmed) {
        Swal.fire({
          icon: 'success',
          title: 'Pesanan Berhasil!',
          text: 'Pesanan Anda telah diterima.',
        });
        // Tambahkan logika submit form atau pemrosesan pesanan di sini
        // Misalnya: document.getElementById('formPesanan').submit();
      }
    });
  });
  </script>
  
  <!-- script modal gambar -->
  <script>
    function showImage(element) {
      const modalImg = document.getElementById('modalImage');
      modalImg.src = element.src;
    }
  </script>
  <!-- script modal gambar -->
  
</html>
